## 정규화

1. 제 1 정규형
원자값 가지는것


2. 제 2 정규형(기본키의 입장)
부분 함수적 종속성을 해결해서 완전 함수적 종속성을 만족하도록 한다. _기본키의 일부를 결정자로 가지면 안됨_
- 기본키가 한개이면 제1정규형을 만족하면 2정규형은 자동으로 만족한다
- _릴레이션R이 제1정규형을 만족하면서, 어떤 후보키에도 속하지 않는 모든 애트리뷰트들이 R의 기본키에 완전하게 함수적으로 종속하는것_


3. 제 3 정규형(기본키의 입장)
- 이행적 함수정 종속성 제거
- _릴레이션 R이 제2 정규형을 만족하면서, 키가 아닌 모든 애트리뷰트가 릴레이션 R의 기본키에 이행적으로 종속하지 않는것(기본키가 아닌 다른 결정자가 없어야함)
- (학번) -> 학과이름/ 학과전화번호  학과이름 -> 학과전화번호 : 이행적 함수적 종속성


4. BCNF
- 실제적인 정규화의 목표
- 갱신이상이 발생하지 않음
- 제 3규형을 만족하고 모든 결정자가 후보키여야함
- ex) 학생은 여러과목을 수강할 수 있고, 각강사는 한과목만 가리키는 경우
- (학번, 과목) -> 강사
- (강사) -> 과목 : 후보키가 아닌 강사가 과목의 결정자이다
- (학번, 강사) / (강사, 과목) 이런식으로 분리

- 제 3 정규형을 만족하는 대부분의 경우 BCNF를 만족함 


1. 제 4 정규형

2. 제 5 정규형

- 함수적 종속성: 정규화 이론의 핵심으로 갱신 이상과 중복을 제거하기 위해 데이터베이스 스키마를 설계하는 데 필수적이다.
- 결정자: 주어진 릴레이션에서 다른 애트리뷰트를 결정하는 하나 이상의 애트리뷰트
  - ex) 사원 릴레이션에서 사원번호는 사원이름, 주소, 전화번호의 결정자이다. A -> B (A가 B를 결정한다, B가 A에 함수적으로 종속한다)
- 완전 함수적 종속성: B가 A에 함수적으로 종속하면서 애트리뷰트 A의 어떤 진부분 집합에도 함수적으로 종속하지 않는것
  - ex) (사원번호, 사원이름, 주소, 전화번호, 직책, 부서번호, 부서이름)
  - (사원번호, 부서번호) -> 직책 
  - (사원번호, 부서번호) -> 사원이름/주소/전화번호  (사원번호) -> 사원이름/주소/전화번호 : 둘다 만족하기때문에 완전 함수적 종속성을 만족하지 않는다
- 이행적 함수적 종속성: 한 릴레이션의 애트리뷰트 ABC가 있을때 A-> B and B -> C이면 이행적으로 종속한다. 
  - 학번 -> 학과이름 / 학과전화번호 and 학과이름 -> 학과전화번호 : 이행적 함수적 종속성

### 릴레이션 분해(decomposition)
- 하나의 릴레이션을 두개 이상의 릴레이션으로 나누는것. 
- 중복이 감소되고, 갱신 이상이 줄어드는 장점이 있지만 문제가 발생할 수 있다. 
- 첫째, 일부질의의 수행시간이 길어질수있음(조인이 필요없던게, 조인이 필요해질 수 있음)
- 둘째, 분해된 릴레이션을 통해 원래 릴레이션을 재구성하기 어려울수있음
- 셋째, 종속성 검사를 위해 분해된 릴레이션을 조인해야할 수 있음
- 따라서 이런 문제와 중복성 감소간의 균형을 고려해야한다.



### 요약
제 1 정규형이 아님 (비정규화된 릴레이션)
-> 반복 그룸을 제거함

-> 제 1정규형을 만족함 (모든 애트리뷰트가 원잣값을 가짐)
-> 부분 함수적 종속성을 제거

-> 제 2 정규형(제 1정규형이면서 키가 아닌 모든 애트리뷰트가 기본키에 완전하게 함수적으로 종속)
-> 이행적 종속성을 제거

-> 제 3정규형(제 2 정규형이면서 키가 아닌 모든애트리뷰트가 기본키에 직접 종속, 키가 아닌값이 다른 애트리뷰트의 결정자가 아니다)
-> 후보키가 아닌 결정자를 제거

-> BCNF(제 3 정규형이면서 모든 결정자가 후보키)
